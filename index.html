<script>

// INTRO
function entrar(){
document.getElementById("inicio").style.display="none";
}

// CONTADOR
const fechaInicio=new Date("2026-01-30");
function actualizarContador(){
const hoy=new Date();
const dias=Math.floor((hoy-fechaInicio)/(1000*60*60*24));
document.getElementById("widget").textContent=
`üíó ${dias} d√≠as juntos`;
}
actualizarContador();

// DETECTAR UBICACI√ìN
async function obtenerUbicacion(){
const res=await fetch("https://ipapi.co/json/");
const data=await res.json();
document.getElementById("ciudad").textContent=
`üìç ${data.city}, ${data.country_name}`;
obtenerClima(data.latitude,data.longitude);
}

// OBTENER CLIMA
async function obtenerClima(lat,lon){
const res=await fetch(
`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true`
);
const data=await res.json();
const temp=data.current_weather.temperature;
const code=data.current_weather.weathercode;

let mensaje="";

if(code<3){
mensaje="Hoy el sol brilla‚Ä¶ pero no tanto como vos.";
document.body.style.background="linear-gradient(135deg,#ffeaa7,#fab1a0)";
crearParticulas("‚òÄÔ∏è");
}
else if(code<50){
mensaje="Si el cielo est√° nublado, igual yo estoy ac√° para iluminarte.";
document.body.style.background="linear-gradient(135deg,#dfe6e9,#b2bec3)";
crearParticulas("‚òÅÔ∏è");
}
else{
mensaje="Si hoy llueve, que sea excusa para abrazarte m√°s fuerte.";
document.body.style.background="linear-gradient(135deg,#74b9ff,#0984e3)";
crearParticulas("üåßÔ∏è");
}

escribirMensaje(mensaje);
document.getElementById("clima").textContent=
`üå° ${temp}¬∞C`;
}

// EFECTO ESCRITURA
function escribirMensaje(texto){
let i=0;
const elemento=document.getElementById("mensaje");
elemento.textContent="";
const intervalo=setInterval(()=>{
elemento.textContent+=texto.charAt(i);
i++;
if(i>=texto.length) clearInterval(intervalo);
},40);
}

// PART√çCULAS
function crearParticulas(simbolo){
setInterval(()=>{
const p=document.createElement("div");
p.textContent=simbolo;
p.style.position="absolute";
p.style.left=Math.random()*100+"vw";
p.style.top="100vh";
p.style.fontSize="20px";
p.style.animation="flotar 4s linear forwards";
document.body.appendChild(p);
setTimeout(()=>p.remove(),4000);
},800);
}

// CORAZONES CLICK
document.body.addEventListener("click",e=>{
const heart=document.createElement("div");
heart.className="corazon";
heart.textContent="üíó";
heart.style.left=e.clientX+"px";
heart.style.top=e.clientY+"px";
document.body.appendChild(heart);
setTimeout(()=>heart.remove(),2000);
});

// CARTA
function abrirCarta(){
document.getElementById("carta").style.bottom="0";
}
function cerrarCarta(){
document.getElementById("carta").style.bottom="-100%";
}

// GALER√çA
function abrirGaleria(){
document.getElementById("galeria").style.right="0";
}
function cerrarGaleria(){
document.getElementById("galeria").style.right="-100%";
}

// M√öSICA
function toggleMusica(){
const m=document.getElementById("musica");
m.paused?m.play():m.pause();
}

obtenerUbicacion();

</script>
